<div id="replace" class="row">
  <% records.forEach(function(record){ %> <%-
  include("./partials/editEnvironmentCard.ejs",{record:record}) %> <% }) %>
</div>

<script>
  $(document).on('click', '.waves-effect.waves-light.btn.delete', function (e) {
    e.preventDefault();
    let id = $(this).attr('id');
    let obj_id = {
        obj_id:id
    }
    $.ajax({
      type: 'DELETE',
      url: '/api/deleteObject',
      data: obj_id,
      success: (res)=>{
          console.log(res)
          location.reload();
      },
      dataType: 'json',
    });
  });
  // Trigger Modal
  document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.modal');
    var instances = M.Modal.init(elems);
  });
  // Upload 3dObject
  $(document).on('click', '.waves-effect.waves-light.btn.add-obj', function (e) {
    e.preventDefault();
    let id = $(this).attr('id');

    let name = $('#obj_name').val();
    let position = $('#obj_position').val();
    let scale = $('#obj_scale').val();
    let rotation = $('#obj_rotation').val();
    let url = $('#obj_url').val();

    let vrObject ={
        name,
        position,
        scale,
        rotation,
        url
    }

    let data = {
        id,vrObject

    }
    $.ajax({
      type: 'PUT',
      url: '/api/addObjects',
      data: data,
      success: (res)=>{
          console.log(res)
          location.reload();
      },
      dataType: 'json',
    });
   
  });
   // Update Environment
   $(document).on('click', '.waves-effect.waves-light.btn.update', function (e) {
    e.preventDefault();
    let id = $(this).attr('id');
    
    console.log(id);

    let name = $('#obj_name'+id).val();
    let position = $('#obj_position'+id).val();
    let scale = $('#obj_scale'+id).val();
    let rotation = $('#obj_rotation'+id).val();
    let url = $('#obj_url'+id).val();
    
    let vrObject ={
        name,
        position,
        scale,
        rotation,
        url
    }

    let data ={
        id,vrObject
    }
    console.log(data)

    // $.ajax({
    //   type: 'PUT',
    //   url: '/api/deleteObject',
    //   data: data,
    //   success: (res)=>{
    //       console.log(res)
    //       location.reload();
    //   },
    //   dataType: 'json',
    // });
  });
</script>
